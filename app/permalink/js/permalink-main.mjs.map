{"version":3,"file":"permalink-main.mjs","sources":["../src/components/Button.vue","../src/main.ts"],"sourcesContent":["<template>\n\t<div>\n\t\t<button class=\"btn btn-primary\" @click=\"shareLink\">\n\t\t\tCreate Share Link\n\t\t</button>\n\t\t<button class=\"btn btn-secondary\" @click=\"getPermalink\">\n\t\t\tGet PermaLink\n\t\t</button>\n\t</div>\n</template>\n\n<script>\n/* eslint-disable no-console */\n\nimport axios from '@nextcloud/axios'\n\nexport default {\n\tmethods: {\n\n\t\tasync shareLink() {\n\t\t\tconst data = {\n\t\t\t\tlink: 'http://nextcloud.local/index.php/s/nNbbmBxrGoNTeCT',\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst response = await axios.post('/ocs/v2.php/apps/permalink/api/link', data)\n\t\t\t\t// Handle success\n\t\t\t\tconsole.log('Response:', response.data)\n\t\t\t} catch (e) {\n\t\t\t\t// Handle error\n\t\t\t\tif (e.response && e.response.data && e.response.data.message) {\n\t\t\t\t\talert(`Error: ${e.response.data.message}`)\n\t\t\t\t} else {\n\t\t\t\t\talert('An error occurred while creating the link')\n\t\t\t\t\tconsole.error(e)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tasync getPermalink() {\n\n\t\t\tconst link = encodeURIComponent('/Media/photo-1527668441211-67a036f77ab4.jpeg')\n\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(`/ocs/v2.php/apps/permalink/api/link?path=${link}`)\n\t\t\t\t// Handle success\n\t\t\t\tconsole.log('Response:', response.data)\n\t\t\t} catch (e) {\n\t\t\t\t// Handle error\n\t\t\t\tif (e.response && e.response.data && e.response.data.message) {\n\t\t\t\t\talert(`Error: ${e.response.data.message}`)\n\t\t\t\t} else {\n\t\t\t\t\talert('An error occurred while creating the link')\n\t\t\t\t\tconsole.error(e)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n.btn {\n\tmargin-top: 10px;\n}\n</style>\n","import Vue from 'vue'\nimport ShareLinkButton from './components/Button.vue'\n\nVue.prototype.OCA = window.OCA\nVue.mixin({ methods: { t, n } })\n\nlet sectionInstance = null\nlet props = null\nconst View = Vue.extend(ShareLinkButton)\n\nwindow.addEventListener('DOMContentLoaded', function() {\n\tif (OCA.Sharing && OCA.Sharing.ShareTabSections) {\n\t\tOCA.Sharing.ShareTabSections.registerSection((el, fileInfo) => {\n\t\t\tif (!el || !fileInfo) return\n\n\t\t\tif (sectionInstance && document.contains(sectionInstance.$el) && props) {\n\t\t\t\tprops.fileInfo = fileInfo\n\t\t\t} else {\n\t\t\t\tif (sectionInstance) {\n\t\t\t\t\tsectionInstance.$destroy()\n\t\t\t\t}\n\n\t\t\t\tsectionInstance = new View({ props: { fileInfo } })\n\n\t\t\t\tprops = Vue.observable({\n\t\t\t\t\t...sectionInstance._props,\n\t\t\t\t\tfileInfo,\n\t\t\t\t})\n\t\t\t\tsectionInstance._props = props\n\n\t\t\t\tsectionInstance.$mount(el[0])\n\t\t\t}\n\t\t})\n\t}\n})\n"],"names":["axios"],"mappings":";;;;AAgBA,MAAA,YAAA;AAAA,EACA,SAAA;AAAA,IAEA,MAAA,YAAA;AACA,YAAA,OAAA;AAAA,QACA,MAAA;AAAA,MACA;AAEA,UAAA;AACA,cAAA,WAAA,MAAAA,iBAAA,KAAA,uCAAA,IAAA;AAEA,gBAAA,IAAA,aAAA,SAAA,IAAA;AAAA,MACA,SAAA,GAAA;AAEA,YAAA,EAAA,YAAA,EAAA,SAAA,QAAA,EAAA,SAAA,KAAA,SAAA;AACA,gBAAA,UAAA,EAAA,SAAA,KAAA,OAAA,EAAA;AAAA,QACA,OAAA;AACA,gBAAA,2CAAA;AACA,kBAAA,MAAA,CAAA;AAAA,QACA;AAAA,MACA;AAAA,IACA;AAAA,IAEA,MAAA,eAAA;AAEA,YAAA,OAAA,mBAAA,8CAAA;AAEA,UAAA;AACA,cAAA,WAAA,MAAAA,iBAAA,IAAA,4CAAA,IAAA,EAAA;AAEA,gBAAA,IAAA,aAAA,SAAA,IAAA;AAAA,MACA,SAAA,GAAA;AAEA,YAAA,EAAA,YAAA,EAAA,SAAA,QAAA,EAAA,SAAA,KAAA,SAAA;AACA,gBAAA,UAAA,EAAA,SAAA,KAAA,OAAA,EAAA;AAAA,QACA,OAAA;AACA,gBAAA,2CAAA;AACA,kBAAA,MAAA,CAAA;AAAA,QACA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;ACvDA,IAAI,UAAU,MAAM,OAAO;AAC3B,IAAI,MAAM,EAAE,SAAS,EAAE,GAAG,KAAK;AAE/B,IAAI,kBAAkB;AACtB,IAAI,QAAQ;AACZ,MAAM,OAAO,IAAI,OAAO,eAAe;AAEvC,OAAO,iBAAiB,oBAAoB,WAAW;AACtD,MAAI,IAAI,WAAW,IAAI,QAAQ,kBAAkB;AAChD,QAAI,QAAQ,iBAAiB,gBAAgB,CAAC,IAAI,aAAa;AAC1D,UAAA,CAAC,MAAM,CAAC,SAAU;AAEtB,UAAI,mBAAmB,SAAS,SAAS,gBAAgB,GAAG,KAAK,OAAO;AACvE,cAAM,WAAW;AAAA,MAAA,OACX;AACN,YAAI,iBAAiB;AACpB,0BAAgB,SAAS;AAAA,QAAA;AAG1B,0BAAkB,IAAI,KAAK,EAAE,OAAO,EAAE,YAAY;AAElD,gBAAQ,IAAI,WAAW;AAAA,UACtB,GAAG,gBAAgB;AAAA,UACnB;AAAA,QAAA,CACA;AACD,wBAAgB,SAAS;AAET,wBAAA,OAAO,GAAG,CAAC,CAAC;AAAA,MAAA;AAAA,IAC7B,CACA;AAAA,EAAA;AAEH,CAAC;"}